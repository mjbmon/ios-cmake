#!/bin/sh

#
# Question: where should there be quotes?
#

#
# Project settings
#

APP=test1
APP_NAME=Test1
APP_PROJECT_NAME=${APP}
APP_VERSION="1.0.1"
APP_EXECUTABLE_NAME=${APP_NAME}
APP_COM=com.roachMotel
APP_BUNDLE_NAME=${APP_COM}.${APP_NAME}
APP_BUNDLE_IDENTIFIER=${APP_BUNDLE_NAME}
APP_DEPLOYMENT_TARGET="17.0"
APP_DEVICE_FAMILY="1,2"  # iphone 1 , ipad 2
APP_CONFIG=Debug

SIMDIR=/Applications/Xcode.app/Contents/Developer/Applications
DEVICE_IS_SIMULATOR=True
DEVICE_NAME="iPad Air 13-inch (M2)"
DEVICE_OS=17.5
#DEVICE="platform=iOS Simulator,name=${DEVICE_NAME},OS=${DEVICE_OS}"
DEVICE_ID=C669C32F-55A3-420B-88CB-B025675D1E0D
DEVICE="platform=iOS Simulator,id=${DEVICE_ID}"

#
#  Generate make.conf and src/app.cmake from settings:
#

cat > make.conf <<EOF
# This is the configuration for the Makefile
# (generated from configure script)
APP=${APP}
APP_NAME=${APP_NAME}
APP_PROJECT_NAME=${APP_PROJECT_NAME}
APP_VERSION=${APP_VERSION}
APP_EXECUTABLE_NAME=${APP_NAME}
APP_COM=${APP_COM}
APP_BUNDLE_NAME=${APP_BUNDLE_NAME}
APP_BUNDLE_IDENTIFIER=${APP_BUNDLE_IDENTIFIER}
APP_DEPLOYMENT_TARGET=${APP_DEPLOYMENT_TARGET}
APP_DEVICE_FAMILY=${APP_DEVICE_FAMILY}
APP_CONFIG=${APP_CONFIG}
DEVICE_IS_SIMULATOR=${DEVICE_IS_SIMULATOR}
DEVICE_NAME="${DEVICE_NAME}"
DEVICE_OS="${DEVICE_OS}"
DEVICE_ID=${DEVICE_ID}
DEVICE="${DEVICE}"
SIMDIR="${SIMDIR}"
EOF

cat > src/app.cmake <<EOF
# This is the configuration for the CMakeFiles.txt
# (generated from configure script)
set(APP ${APP})
set(APP_NAME ${APP_NAME})
set(APP_PROJECT_NAME ${APP_PROJECT_NAME})
set(APP_VERSION ${APP_VERSION})
set(APP_EXECUTABLE_NAME ${APP_EXECUTABLE_NAME})
set(APP_COM ${APP_COM})
set(APP_BUNDLE_NAME ${APP_BUNDLE_NAME})
set(APP_BUNDLE_IDENTIFIER ${APP_BUNDLE_IDENTIFIER})
set(APP_DEPLOYMENT_TARGET ${APP_DEPLOYMENT_TARGET})
set(APP_DEVICE_FAMILY ${APP_DEVICE_FAMILY})
set(APP_CONFIG ${APP_CONFIG})
set(DEVICE_IS_SIMULATOR ${DEVICE_IS_SIMULATOR})
set(DEVICE_NAME ${DEVICE_NAME})
set(DEVICE_OS ${DEVICE_OS})
set(DEVICE_ID ${DEVICE_ID})
set(DEVICE ${DEVICE})
set(SIMDIR "${SIMDIR}")
EOF
